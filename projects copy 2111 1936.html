<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>personal studies</title>
    <link rel="stylesheet" href="/css/projects.css">
    <link rel="shortcut icon" href="/img/heezus.ico" />
    <style>
        @import url('https://fonts.googleapis.com/css?family=Raleway:900&display=swap');

        @font-face {
            font-family: 'horus';
            src: url('./assets/premio.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        #container {
            position: absolute;
            filter: url(#threshold) blur(0.6px);
            height: 75vh;
            width: 70%;
            margin: 0;
            padding: 0;
            font-size: 6em;
            text-align: center;
            text-transform: uppercase;
            z-index: 50;
            pointer-events: none;
            line-height: 90px;
        }

        #text1,
        #text2 {
            position: absolute;
            top: 70%;
            left: 57%;
            transform: translateX(-50%) translateY(-50%);
            width: 70%;
            display: inline-block;
            font-family: 'horus', sans-serif;
            font-size: 90pt;
            text-align: center;
        }

        /* SVG для фильтра */
        #filters {
            position: absolute;
            visibility: hidden;
        }


        .media {
            width: 600px;
            text-align: right;
        }

        /* Применяем стиль ко всем текстовым элементам */
        .media li,
        .media a,
        .logo {
            font-family: 'horus', sans-serif;
            text-transform: uppercase;
            text-decoration: none;
            transition: filter 2s ease-out, transform 2s ease-out;
            /* Плавное изменение фильтра и трансформации */
        }

        /* Применяем эффект только при наведении на li или a */
        .media li:hover,
        .media a:hover,
        .logo:hover {
            filter: url(#threshold-bleed);
            /* Применение эффекта при наведении */
        }

        /* плавание куртов */

        .kurt-1,
        .kurt-2,
        .kurt-3,
        .kurt-4,
        .kurt-5,
        .kurt-6,
        .kurt-7,
        .kurt-8 {
            will-change: transform;
            transition: transform 4s cubic-bezier(0.605, 0.010, 0.535, 0.995);
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>

<body>

    <!-- preloader -->

    <div id="preloader">
        <div class="overlay-loader">
            <div class="loader">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
    </div>

    <!-- mobile navigation -->

    <div class="right">
        <div class="pages">
            <a href="/portfolio">selected works</a> /
            <a href="/ar">AR</a> /
            <a href="https://smorgasbord.heez.us/">proto genesis</a> /
            <a href="/whois">about me</a>
        </div>
    </div>

    <div class="left">
        <div class="lpages">
            <a href="/index">heezus</a> /
            <a href="/projects">personal studies</a>
        </div>
    </div>

    <!-- navigation -->

    <nav class="navbar">
        <div class="logo">
            <a href="/index"><img src="/img/logo-2.png" alt=""></a>
        </div>

        <div class="media">
            <ul>
                <li style="opacity: 50%;">studies</li>
                <li><a href="/portfolio">selected works</a></li>
                <li><a href="/ar">AR</a></li>
                <li><a href="https://smorgasbord.heez.us/">proto genesis</a></li>
                <li><a href="/whois.html">about me</a></li>
            </ul>
        </div>
    </nav>




    <!-- Text containers wrapped in a parent container -->
    <div id="container">
        <span id="text1">personal studies</span>
        <span id="text2"></span>
    </div>




    <!-- main base -->

    <!--<h1 id="title">projects + studies</h1>-->

    <div class="main" id="mainBg">
    </div>


    <!-- items -->

    <div id="kurt1" class="kurt-1">
        <a href="/projects/ot">
            <img onmouseover="changeLayout('#c3203c', 'otvaal', 'kurt1')" onmouseout="returnLayout('kurt1')"
                src="img/webp/ot2.png" alt="">
        </a>
    </div>

    <div id="kurt2" class="kurt-2">
        <a href="/projects/inturist">
            <img onmouseover="changeLayout('#515877', 'inturist', 'kurt2')" onmouseout="returnLayout('kurt2')"
                src="img/webp/in2.png" alt="">
        </a>
    </div>

    <div id="kurt3" class="kurt-3">
        <a href="/projects/over">
            <img onmouseover="changeLayout('#dfb3a1', 'postcards of overexposed healing', 'kurt3')"
                onmouseout="returnLayout('kurt3')" src="img/webp/overexposed2.png" alt="">
        </a>
    </div>

    <div id="kurt4" class="kurt-4">
        <a href="/projects/mazo">
            <img onmouseover="changeLayout('#992315', 'it is winter', 'kurt4')" onmouseout="returnLayout('kurt4')"
                src="img/webp/sh2.png" alt="">
        </a>
    </div>

    <div id="kurt5" class="kurt-5">
        <a href="/projects/oq">
            <img onmouseover="changeLayout('#e34b24', 'oqjav', 'kurt5')" onmouseout="returnLayout('kurt5')"
                src="img/webp/oqjav2.png" alt="">
        </a>
    </div>

    <div id="kurt6" class="kurt-6">
        <a href="/projects/icu">
            <img onmouseover="changeLayout('#c38d9b', 'i see you', 'kurt6')" onmouseout="returnLayout('kurt6')"
                src="img/webp/icu2.png" alt="">
        </a>
    </div>

    <div id="kurt7" class="kurt-7">
        <a href="/projects/cph">
            <img onmouseover="changeLayout('#463a5f', 'cph', 'kurt7')" onmouseout="returnLayout('kurt7')"
                src="img/webp/cph2.png" alt="">
        </a>
    </div>

    <div id="kurt8" class="kurt-8">
        <a href="/projects/metal">
            <img onmouseover="changeLayout('#0b86e1', 'metallostroy', 'kurt8')" onmouseout="returnLayout('kurt8')"
                src="img/webp/meta2.png" alt="">
        </a>
    </div>



    </div>

    <!-- mobile options -->

    <div class="zone">

        <!-- <p class="hmobile">projects + studies</p> -->
        <a href="/projects/mazo"><img src="img/webp/sh2.png " alt=""></a>
        <p>it's winter</p>
        <a href="/projects/inturist"><img src="img/webp/in2.png " alt=""></a>
        <p>inturist</p>
        <a href="/projects/icu"><img src="img/webp/icu2.png " alt=""></a>
        <p>I See You</p>
        <a href="/projects/over"><img src="img/webp/overexposed2.png" alt=""></a>
        <p>overexposed healing</p>
        <a href="/projects/ot"><img src="img/webp/ot2.png " alt=""></a>
        <p>otvaal</p>
        <a href="/projects/cph"><img src="img/webp/cph2.png " alt=""></a>
        <p>cph</p>
        <a href="/projects/metal"><img src="img/webp/meta2.png " alt=""></a>
        <p>metallostroy</p>
        <a href="/projects/oq"><img src="img/webp/oqjav2.png" alt=""></a>
        <p>oqjav</p>
    </div>



    <!-- overlay  -->

    <div id="mainOverlay" class="overlay">
    </div>

    <!-- SVG-фильтр -->
    <svg id="filters">
        <defs>
            <filter id="threshold">
                <feColorMatrix in="SourceGraphic" type="matrix" values="1 0 0 0 0
                        0 1 0 0 0
                        0 0 1 0 0
                        0 0 0 255 -140" />
            </filter>

            <!-- Threshold с эффектом bleeding (уменьшенный блюр) -->
            <filter id="threshold-bleed">
                <!-- Уменьшенное размытие для эффекта растекания -->
                <feGaussianBlur in="SourceGraphic" stdDeviation="1.1" result="blur" /> <!-- Уменьшенный блюр -->
                <!-- Применение порога для сохранения жёсткости -->
                <feColorMatrix in="blur" type="matrix" values="1 0 0 0 0
                            0 1 0 0 0
                            0 0 1 0 0
                            0 0 0 255 -100" />
            </filter>
        </defs>
    </svg>



    <script>
        const elts = {
            text1: document.getElementById("text1"),
            text2: document.getElementById("text2")
        };

        const defaultText = "personal studies"; // Default text
        const morphTime = 1; // Morph duration in seconds

        // Morphing function for text change
        function setText(word) {
            if (elts.text1.textContent === word) return; // If the text is the same, do nothing

            // Reset current text and initiate new text animation
            elts.text2.textContent = word;

            let startTime = null;

            function animateMorph(time) {
                if (!startTime) startTime = time;
                const elapsed = (time - startTime) / 1000;
                const fraction = Math.min(elapsed / morphTime, 1);

                // Apply blur and opacity for smooth transition
                elts.text2.style.filter = `blur(${Math.min(8 / fraction - 8, 100)}px)`;
                elts.text2.style.opacity = `${Math.pow(fraction, 0.4) * 100}%`;

                const reverseFraction = 1 - fraction;
                elts.text1.style.filter = `blur(${Math.min(8 / reverseFraction - 8, 100)}px)`;
                elts.text1.style.opacity = `${Math.pow(reverseFraction, 0.4) * 100}%`;

                if (fraction < 1) {
                    requestAnimationFrame(animateMorph);
                } else {
                    elts.text1.textContent = word;
                    elts.text1.style.filter = "";
                    elts.text1.style.opacity = "100%";
                    elts.text2.style.filter = "";
                    elts.text2.style.opacity = "0%";
                }
            }

            requestAnimationFrame(animateMorph);
        }

        // Layout change logic for each kurt item
        function changeLayout(newMainBg, newTitle, newBlock) {
            document.getElementById('mainBg').style.backgroundColor = newMainBg;

            // Устанавливаем плавный переход для оверлея
            const overlay = document.getElementById("mainOverlay");
            overlay.style.transition = "background-color 0.5s ease, opacity 0.5s ease"; // Включаем плавность

            overlay.style.backgroundColor = newMainBg; // Устанавливаем новый цвет фона
            overlay.style.opacity = '0.7'; // Устанавливаем прозрачность
            overlay.style.zIndex = '2'; // Устанавливаем z-index для оверлея

            setText(newTitle); // Обновляем текст через morph эффект

            var imgElement = document.querySelector(`#${newBlock} img`);
            imgElement.style.transform = `rotate(${Math.random() * 10 - 5}deg) scale(${1 + (Math.random() * 0.2)})`; // Легкое вращение и масштабирование

            document.getElementById(newBlock).style.zIndex = '10';

            setTimeout(() => {
                applySVGFilter(newMainBg);
            }, 500);
        }

        function returnLayout(newBlock) {
            document.getElementById("mainBg").style.backgroundColor = '#060606';

            const overlay = document.getElementById("mainOverlay");
            overlay.style.transition = "background-color 0.5s ease, opacity 0.5s ease"; // Включаем плавный переход при возврате
            overlay.style.backgroundColor = '#060606'; // Возвращаем цвет фона
            overlay.style.opacity = '0'; // Убираем прозрачность
            overlay.style.zIndex = '0'; // Убираем с переднего плана

            setText(defaultText); // Возвращаем исходный текст

            var imgElement = document.querySelector(`#${newBlock} img`);
            imgElement.style.transform = 'rotate(0deg) scale(1)'; // Сбрасываем трансформацию

            document.getElementById(newBlock).style.zIndex = '1';

            removeSVGFilter(); // Убираем SVG фильтр
        }

    </script>

    <script>
        var loader = document.getElementById("preloader");
        window.addEventListener("load", function () {
            loader.style.display = "none";
        })
    </script>


    <script>
        function randomFloat(min, max) {
            return Math.random() * (max - min) + min;
        }

        function animateFloating(el) {
            const x = randomFloat(-30, 30);
            const y = randomFloat(-30, 30);
            el.style.transform = `translate(${x}px, ${y}px)`;

            setTimeout(() => animateFloating(el), 4000); // повтор через 4 сек
        }

        document.addEventListener("DOMContentLoaded", () => {
            const elements = document.querySelectorAll('[id^="kurt"]');
            elements.forEach(el => animateFloating(el));
        });
    </script>

<!-- SCOOBY EYES BACKGROUND SCRIPT -->
    <script>
        class ScoobyBackground {
            constructor(config = {}) {
                // --- CONFIGURATION DEFAULTS ---
                this.config = {
                    // SVG Data (The Paths from your "Angry Eyes" custom SVG)
                    paths: {
                        leftEye: "M75.3,75.5c-2.9,3.4-6.1,7.1-8.6,12s-3.8,8.8-5.4,13.8-4,9.1-5,14.1,0,9.9-.6,15-1,9.7-1,14.8-.8,9.9-.3,14.9,2.1,9.7,3.1,14.6,1.4,9.9,2.9,14.6,3.2,9.4,5.3,13.9,4.2,9.1,7,13.3,6.6,7.4,10,11.2,6.8,7.1,10.8,10.3c3.8,3,7.3,6.7,11.7,9.3s8.8,4.3,13.6,6.4,9,3.3,13.4,4.8,9.3,2,13.9,3.1,9.2,2.3,13.8,3.1,9.3,2.3,13.9,2.8,9.5.8,14.2.9,9.5-1.2,14.2-1.5c4.8-.3,9.6.9,14.3.3s9.4-2,13.9-3,9.3-2.2,13.8-3.5,8.9-3.5,13.2-5.2c4.5-1.7,9.1-3.1,13.3-5.1s8.2-5,12.1-7.3,8.5-4.5,12.2-7.3,7.9-5.6,11.2-8.8,7.1-6.7,9.9-10.3,4.4-8.6,6.5-12.7,4.9-9.6,4.5-13.9-3.4-9-6.8-13.1-5.9-7.4-10.3-10.5-8.3-4.6-12.9-7.1-8.7-3.9-13.3-6.1-8.5-4.7-13-6.8-8.7-4.4-13.1-6.5-8.8-4.3-13.1-6.4-9.5-3.1-13.7-5.4-8-5.9-12-8.5-8.9-4.7-12.5-7.8-6-7.3-9.4-10.7-6.8-6.5-10-10.1-5.9-7.4-9-11-6.7-6.8-9.9-10.2-6.1-7.6-9.4-10.7-8.2-5.3-11.9-7.8-8.3-4.5-12.7-5.9-8.9-2.2-13.8-1.7-8.8,1.5-13.5,3.7-7.8,4.3-12,7.5-6.5,6.2-10.2,9.8-6.2,6.6-9.5,10.4Z",
                        rightEye: "M363.7,224.7c0,3.2.5,8.3,2.9,13.9s4.9,7.5,7.6,11.9,4.3,8.2,7.4,12,5.9,7.2,9.5,10.6c3.3,3.1,7.1,6.1,11,8.9s7.7,5.3,12,7.5,8.5,3.9,13,5.5,9,2.6,13.7,3.5c4.5.8,9.2,1.1,14.1,1.3s9.3.2,14.1-.3,8.9-2.5,13.6-3.5c4.4-1,9.2-1.1,13.8-2.7s8.2-4.1,12.6-6,8.4-3.5,12.7-5.6,8.5-3.6,12.6-5.8,8.7-3.5,12.6-5.9,7-6.3,10.9-8.8,8.7-3.7,12.4-6.5,7.5-5.6,11-8.5,6.3-7,9.7-10.1,7.6-5.7,10.7-8.9,6-7.3,8.8-10.8,5.2-7.9,7.5-11.7,5.5-7.8,7.2-11.9,2.2-9.2,2.9-13.5.8-9.1-.2-13.6-3.6-8.8-7.3-11.5-7.6-4.9-12.9-5.6-9.2-.5-14.3,0-9.1,2-14,3-9.1,2.3-13.8,3.6-9.2,2.1-13.8,3.6-9.5,1.7-14,3.2-9.1,3.1-13.5,4.7-8.6,4.9-12.9,6.4-9.5,3.1-13.6,4.4-10.3,2.6-13.9,3.2-8.5.8-13.9,1.1-9,1.5-13.9,1.7-9.2,0-14,.3-9.3.6-14,1-9.5-.3-14.1.3-9.5,1.4-13.9,2.5-9.2,3-13.3,4.8-8.9,4.1-12.3,7-6.3,7.1-8.2,11.5-2.7,8.5-2.7,13.7Z",
                        leftPupil: "M213.8,147.2c11.8,5.2,14.3,21.7,4.8,31.6-8.3,8.7-17.8,8.8-30.4.4-13.8-9.3-8.8-28.7,8.3-32.7,4.3-1,14.4-.6,17.2.7",
                        rightPupil: "M455.5,198.5c11.8,5.2,14.3,21.7,4.8,31.6-8.3,8.7-17.8,8.8-30.4.4-13.8-9.3-8.8-28.7,8.3-32.7,4.3-1,14.4-.6,17.2.7",
                        details: [
                            "M300.4,253.1c-4,2.3-7.8,4.9-11.8,7s-8.1,4.4-12.1,6.5-8.2,4.1-12.3,6.1-8.8,2.8-13,4.7-8.2,4.1-12.4,5.9c-4.2,1.7-8.1,4-12.4,5.7s-8.4,3.5-12.7,5-8.8,2.2-13.1,3.6-8.6,3-12.9,4.2-8.9,1.7-13.3,2.6c-5,1-9.9,2.1-14.9,2.7s-10.1,1.2-15.1,1.5-10.1.8-15.2.7-10.1-.9-15.1-1.3-10.1-.7-15.1-1.6c-5-.9-10-1.7-14.9-3s-9.4-3.6-14.2-5.4c-4.7-1.8-9.2-4.1-13.7-6.4s-8.8-4.7-13.2-7.4c-.2-.2-1.3.5-1.4.7-.2.3-.3,1.4,0,1.6,3.8,2.8,8,5,12,7.4s8,5,12.2,7,9,2.8,13.3,4.4,8.9,2.7,13.4,3.9,8.9,2.6,13.5,3.5c4.6.9,9.3,1.3,13.9,1.8s9.3.8,14,1,9.4,1.4,14.1,1.2,9.5.1,14.2-.3,9.2-2.4,13.8-3.1c5-.7,10-1.5,14.9-2.5s9.9-1.9,14.8-3.2,9.9-2.3,14.6-3.9,9.4-3.8,14-5.7,9.3-4,13.8-6.3,9.3-4.2,13.6-6.8,8.1-6.1,12.2-9c4.8-3.3,8.9-7.6,13.4-11.3,4.5-3.7,8.9-7.5,13-11.6.2-.2,0,.6,0,.4-.2-.3.5-.4.2-.3Z",
                            "M300.1,287.8c-3.9,1.8-7.8,3.5-11.6,5.5-3.7,2-6.8,5-10.5,7.1s-7.6,3.5-11.3,5.6-7.7,3.4-11.4,5.4c-4.4,2.4-8.9,5-13.6,7.6s-8.3,6.3-12.9,8.7-9.8,3.6-14.5,5.7c-4.9,2.1-9.5,4.6-14.3,6-3.8,1.3-7.6,3.4-11.7,4.5s-8.5.5-12.5,1.3c-5,1.2-10.1,2.5-15.2,3.4-1.5.2-3.1.5-3.1.5-4.8.6-9.7.9-14.7,1.2s-9.8-.4-14.7-.4-9.9.8-14.7.6c-.3,0,0,0,0,.2,0,.3-.5,1.1-.2,1.1,4.9.7,10.5.6,15.9,1,5.5.5,10.9,1.9,15.9,2,4.9.2,11.1-2,16-2,5.3-.4,10.9,1.1,16.2.3,4.3-.5,8.5-1.5,12.7-2.4s8.1-3,12.3-4.2,8.4-2,12.5-3.3c4.1-1.4,8.2-2.8,12.2-4.3s7.8-3.5,11.8-5.3,7.8-3.6,11.6-5.6,7.9-3.6,11.5-6c5.2-3.3,11.1-7.1,16-10.8,4.2-3.4,7.5-7.8,11.4-11.4s8.5-6.6,12.2-10.6c.2-.2-.3-.8-.4-1-.1-.3-.5-.5-.8-.4Z",
                            "M567.7,299.1c-6.3,1.7-6.4,1.6-12.7,3.3s-13,2-13,2c-5,1.3-9.9,2.7-14.9,3.9s-9.9,3-14.9,4-10.2,1.3-15.3,2-10.2,1.3-15.3,1.6-10.3,1.5-15.5,1.2c-5-.4-9.8-2.6-14.6-3.6s-9.7-2.2-14.4-3.9-9.9-2.3-14.4-4.4-8.5-5.5-12.8-8-8.4-5.4-12.5-8.2c-3.6-2.4-7-5-10.6-7.6s-7.9-3.9-11.4-6.5c-.2-.1.3-.4,0-.3-.3.2.2-.4.4-.1.3.4-.3,1.3,0,1.7-.4-.3-1.4.3-1.2.8,1.7,6,4.5,11.6,7.1,17.2,1.7,3.8,2.7,7.9,4.7,11.5s4.7,6.9,7.1,10.3,5.3,6.3,8.1,9.4c2.9,3.1,5.7,6.2,8.8,9.1s6.2,5.6,9.6,8.2,6.2,5.8,9.9,8c4,2.4,8.6,4,13,5.6,4.4,1.6,8.9,3.2,13.5,4s9.4,1.5,14.1,1.6c4.7,0,9.3-1.9,13.9-2.6.3,0,1.2.6,1.2.3,0-.3-.8,0-1.1,0-6,0-12.1-.2-17.9-1.2s-11.7-3.1-17.1-5.4c-5.4-2.3-10.7-5-15.4-8.4s-8.9-7.6-13-11.8c-3.6-3.8-6.5-8.5-9.6-12.7,5.2,4.7,10.3,9.9,16.3,13.5,4.6,2.7,10,4.2,15,6.2s10.3,2.9,15.5,4.1,10.4,3.5,15.8,3.7c4.7.2,9.5-.4,14.1-.8,4.7-.4,9.3-1.4,13.9-2.3s9.4-1,13.9-2.2,8.7-3.7,13.1-5.2,9.2-2.2,13.6-3.8c.3,0-.3-.7-.4-.9,0-.3.4,0,0,.1-3.7.9-7.6,1.1-11.4,1.9-3.8.8-7.7.5-11.5,1.2-4.9.9-9.6,3.1-14.5,3.6s-10,1-14.9,1.1-10.1.3-14.9-.3-9.8-2-14.6-3.4-8.9-4.1-13.4-6.3-8.8-4.2-12.8-7.3c-1.5-1.1-3.9-1.5-5.4-2.6.9.3,2.8-.7,3.7-.4,4.9,1.4,9.7,2.9,14.7,3.6s10.1,1.4,15.2,1.6,10.2.8,15.3.4c5.1-.4,10-2.2,15-3,5.2-.9,10.4-1.8,15.5-3.1s10.5-1.7,15.5-3.3,10.1-3,15.1-4.8c5-1.8,9.8-3.9,14.7-5.8s9.7-4.3,14.6-6.2c.3-.1.7-.4.6-.7,0-.3-.4.3-.7.4Z",
                            "M284.9,119.7c-5-1.5-10-3.4-15-5.2s-9.5-4.8-14.3-6.8-10.2-3.2-14.8-5.6-9.1-5.4-13.5-8.2-8.5-6.1-12.8-9.3c-3.9-2.9-7.5-6.1-11-9.4s-7.2-6.4-10.5-10-6.2-7.4-9.5-11-7.3-6.4-10.6-9.9-6.2-7.4-9.7-10.7-7.1-6.5-10.9-9.5c-3.8-3-7.1-6.2-10.9-8.3s-8.6-3.7-12.8-5-8.9-2.8-13.4-3.2-9.2.3-13.7.8-8.8,1.9-13.3,3.2-8.7,2.4-13,4.2-8.5,3.3-12.5,5.6-7.9,4.5-11.7,7.1-6.8,6.2-10.4,8.9c-.2.2-1.5.2-1.3.4.2.3,1.5.5,1.7.3,3.3-2.2,6.3-4.9,9.8-6.9s7-3.9,10.5-5.7c4.6-2.3,9.3-3.5,13.6-5.2s9.2-3.9,13.6-5,9.7-1.4,14.4-1.7,9.6,0,14.3,1,9.2,2.2,13.7,4.3,8.4,4.3,12.5,7.3,7.6,5.5,11.4,9,6.3,7,9.7,10.9c3.4,3.7,6.7,7.5,10,11.4s7.4,7,10.7,10.8,6.1,8.1,9.6,11.8,7,7.4,10.8,10.7c3.2,2.7,7.2,4.2,10.5,6.6s6.7,4.7,10.2,6.9,6.2,5.6,9.8,7.6c4.7,2.7,9.8,5,14.8,7.2s10,4.7,15.2,6.5,10.8,2.3,16.1,3.6c4.5,1.2,8.8,2.7,13.1,3.9s8.7,2.9,12.9,4.4,9.3,2,13.1,4.4,6.9,6,9.8,9.7,5.3,7.1,7.2,11.8c1.6,3.6,2,7.7,3.1,11.5s2,7.6,2.9,11.5c0,.3.6.5.8.5.3,0-.1-.3-.1-.7,0-4.1.7-8.2.2-12.3s-1.4-8.1-2.5-12c-1.4-5.4-4.4-9.5-6.8-13.5s-6-8-9.8-11.2-7.8-6.2-12.5-8.4-9.3-3.3-14.3-5-9.6-2.9-14.5-4.4Z",
                            "M663.7,142.4c-2.3-2.8-3.9-6.2-6.4-8.8s-4.5-5.7-7.1-8.3c-3.1-3.1-7.5-4.9-11-7.8s-6-6.7-9.7-9.2-8.1-3.9-12.1-5.7-8-3.8-12.4-4.8-8.7-1.6-13.3-1.5c-5,.3-9.5,2.3-14.1,3.7s-9.7,2-14,4.3-7.8,5.9-11.9,8.6-8.3,5.2-12.2,8.1-8.2,5.3-12.2,8-7.6,6.5-11.9,8.6c-4.1,2.3-8.6,3.8-13,5.1s-9,2.2-13.6,2.8-9.2.9-13.8,1.3c-5.3.5-10.6,1.5-15.9,1.6s-10.6-1.5-16-1.6-10.6.1-15.9-.2-10.6-.9-15.9-1.3c-3.9-.1-8.1-.9-12.2-.4s-7.9,2.2-11.5,4.2c-4.5,2.6-7.5,6.8-10.4,11.1s-5,8.8-6.7,13.6-3.8,9.8-5,14.4c0,.2.3.8.5.9.3.1.2-.5.3-.7,2-3.6,5.4-7.1,7.8-11.3,2.2-4,3.4-8.8,6.2-12.2s6.6-7.3,10.6-9c5.4-2.3,12.4-.3,19.3.5,3.5.4,7.3-.3,10.9.2s7.1,1.1,10.7,1.5c4.4.5,8.8,1.2,13.2,1.3s8.9.3,13.3.1,8.8-1.5,13.2-2.1,8.8-1.1,13.1-1.9,8.8-1.1,13.1-2.1c4.9-1.2,9.3-3.7,13.7-5.7s9.2-3.8,13.3-6.4,8.8-4.8,12.7-7.8,7.2-7,11.1-10,7.9-6.2,11.9-9,8.5-5.5,12.8-7.6,9.2-4.1,14.1-5,9.8-1.4,15-.7,9,3.2,14,5.4,8.9,3.4,13.4,6.4,6.9,6.5,11.1,9.9,7.7,5.7,11.5,9.3,7.1,6.5,10.7,10.3c.2.2,0,0,.2-.2.2-.2.2.2,0,0Z"
                        ]
                    },
                    // User Settings
                    colors: {
                        background: 'transparent', // Important: Allows your #mainBg to show through
                        eyes: '#ffffff',
                        pupils: '#1d1d1b', // This color is used for logic/reference, but visually pupils are now holes
                        details: '#ffffff',
                    },
                    position: {
                        top: '80%',
                        left: '85%',
                        width: '600px',
                        opacity: '0.8'
                    },
                    svg: {
                        viewBox: "0 0 700 370",
                        leftEyeCenter: { x: 200, y: 165 },
                        rightEyeCenter: { x: 440, y: 215 },
                        maxRadius: 30
                    }
                };

                this.init();
            }

            init() {
                // 1. Create the Fixed Background Container
                const bgContainer = document.createElement('div');
                Object.assign(bgContainer.style, {
                    position: 'fixed',
                    top: '0',
                    left: '0',
                    width: '100%',
                    height: '100%',
                    zIndex: '0', // Places eyes just above background but behind content
                    backgroundColor: this.config.colors.background,
                    overflow: 'hidden',
                    pointerEvents: 'none' // Let clicks pass through
                });

                // 2. Create the SVG Wrapper (for positioning)
                const svgWrapper = document.createElement('div');
                Object.assign(svgWrapper.style, {
                    position: 'absolute',
                    top: this.config.position.top,
                    left: this.config.position.left,
                    transform: 'translate(-50%, -50%)',
                    width: this.config.position.width,
                    maxWidth: '100%',
                    aspectRatio: '700/370',
                    opacity: this.config.position.opacity,
                    transition: 'opacity 0.3s ease'
                });

                // Common style for blinking animation
                const blinkStyle = "transform-origin: 350px 185px; transform-box: view-box; transition: transform 0.1s ease-in-out;";

                // 3. Build the SVG HTML
                // Strategy: We use a MASK to create holes for the pupils.
                // The Mask contains a white rectangle (opaque) and black pupils (transparent).
                svgWrapper.innerHTML = `
              <svg viewBox="${this.config.svg.viewBox}" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; filter: drop-shadow(0 0 15px rgba(255,255,255,0.15));">
                <defs>
                  <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                    <feGaussianBlur stdDeviation="2" result="blur" />
                    <feComposite in="SourceGraphic" in2="blur" operator="over" />
                  </filter>
                  
                  <mask id="scooby-cutout-mask">
                     <!-- 1. Reveal Everything (White) -->
                     <rect x="-1000" y="-1000" width="4000" height="4000" fill="white" />
                     
                     <!-- 2. Cut out Pupils (Black) - These must blink (squash) AND move -->
                     <g id="scooby-mask-blink-group" style="${blinkStyle}">
                        <g id="scooby-mask-left-pupil"><path d="${this.config.paths.leftPupil}" fill="black" /></g>
                        <g id="scooby-mask-right-pupil"><path d="${this.config.paths.rightPupil}" fill="black" /></g>
                     </g>
                  </mask>
                </defs>
                
                <!-- Details (Brows/Wrinkles) -->
                <g style="opacity: 0.9; fill: ${this.config.colors.details}">
                  ${this.config.paths.details.map(d => `<path d="${d}" />`).join('')}
                </g>
                
                <!-- Eyes Whites (Masked) -->
                <!-- This group blinks (squashes), and the mask cuts holes in it -->
                <g id="scooby-visual-blink-group" mask="url(#scooby-cutout-mask)" style="${blinkStyle}">
                  <path d="${this.config.paths.leftEye}" fill="${this.config.colors.eyes}" />
                  <path d="${this.config.paths.rightEye}" fill="${this.config.colors.eyes}" />
                </g>
              </svg>
            `;

                bgContainer.appendChild(svgWrapper);
                document.body.appendChild(bgContainer);

                // 4. Store References
                this.elements = {
                    svgWrapper,
                    // We now target the pupil groups inside the mask
                    leftPupil: svgWrapper.querySelector('#scooby-mask-left-pupil'),
                    rightPupil: svgWrapper.querySelector('#scooby-mask-right-pupil'),
                    // We target both the visual eyes and the mask group for blinking
                    visualBlinkGroup: svgWrapper.querySelector('#scooby-visual-blink-group'),
                    maskBlinkGroup: svgWrapper.querySelector('#scooby-mask-blink-group')
                };

                // 5. Start Event Listeners
                window.addEventListener('mousemove', this.handleMouseMove.bind(this));
                this.startBlinking();
            }

            handleMouseMove(e) {
                if (!this.elements.leftPupil) return;

                const rect = this.elements.svgWrapper.getBoundingClientRect();
                const vbW = 700; // Viewbox Width
                const vbH = 370; // Viewbox Height
                const scaleX = rect.width / vbW;
                const scaleY = rect.height / vbH;

                // Centers in Screen Coordinates
                const lCX = rect.left + (this.config.svg.leftEyeCenter.x * scaleX);
                const lCY = rect.top + (this.config.svg.leftEyeCenter.y * scaleY);
                const rCX = rect.left + (this.config.svg.rightEyeCenter.x * scaleX);
                const rCY = rect.top + (this.config.svg.rightEyeCenter.y * scaleY);

                const getOffset = (cX, cY) => {
                    const dx = e.clientX - cX;
                    const dy = e.clientY - cY;
                    const angle = Math.atan2(dy, dx);
                    const avgScale = (scaleX + scaleY) / 2;
                    const dist = Math.min(this.config.svg.maxRadius, Math.hypot(dx, dy) / avgScale);
                    return { x: Math.cos(angle) * dist, y: Math.sin(angle) * dist };
                };

                const lOff = getOffset(lCX, lCY);
                const rOff = getOffset(rCX, rCY);

                // Apply movement to pupils inside the mask
                this.elements.leftPupil.style.transform = `translate(${lOff.x}px, ${lOff.y}px)`;
                this.elements.rightPupil.style.transform = `translate(${rOff.x}px, ${rOff.y}px)`;
            }

            startBlinking() {
                const blink = () => {
                    if (this.elements.visualBlinkGroup && this.elements.maskBlinkGroup) {
                        // Squash both the eyes and the pupil-holes simultaneously
                        this.elements.visualBlinkGroup.style.transform = 'scaleY(0.1)';
                        this.elements.maskBlinkGroup.style.transform = 'scaleY(0.1)';
                        
                        setTimeout(() => {
                            this.elements.visualBlinkGroup.style.transform = 'scaleY(1)';
                            this.elements.maskBlinkGroup.style.transform = 'scaleY(1)';
                        }, 150);
                    }
                    setTimeout(blink, Math.random() * 6000 + 2000);
                };
                setTimeout(blink, 3000);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            new ScoobyBackground();
        });
    </script>
</body>

</html>